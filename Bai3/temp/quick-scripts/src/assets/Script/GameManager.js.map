{"version":3,"sources":["assets\\Script\\GameManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport PlayerController from \"./PlayerController\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class GameManager extends cc.Component {\n\n    @property(cc.Prefab)\n    public bullet_Prefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    public enemy_Prefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    public fire_Point: cc.Node = null;\n\n    @property(cc.Node)\n    public player: cc.Node = null;\n\n    @property(cc.Node)\n    public enemy: cc.Node = null;\n\n    @property(cc.Node)\n    public enemy_Pos: cc.Node = null;\n\n    private bullet;\n\n    private fire_Point_Position;\n\n    private player_velocity: cc.Vec2;\n\n    private seek: cc.Vec2;\n    private old_Pos: cc.Vec2;\n    private desired : cc.Vec2;\n\n    start(): void {\n        this.player_velocity = this.player.getComponent(cc.RigidBody).linearVelocity;\n    }\n\n    Fire() {\n        this.bullet = cc.instantiate(this.bullet_Prefab);\n        this.bullet.parent = this.node;\n        this.fire_Point_Position = this.node.convertToNodeSpaceAR(this.fire_Point.parent.convertToWorldSpaceAR(this.fire_Point.getPosition()));\n        this.bullet.setPosition(this.fire_Point_Position);\n        this.bullet.rotation = this.player.rotation;\n    }\n\n    caculated(target: cc.Vec2): cc.Vec2 {\n        if (target == null)\n        {\n            return cc.v2(0, 0);\n        }\n\n        this.desired.x = target.x - this.fire_Point_Position.x;\n        this.desired.y = target.y - this.fire_Point_Position.y;\n        let steering = new cc.Vec2();\n        cc.Vec2.subtract(steering, this.desired, this.player_velocity);\n        return steering;\n    }\n\n    update(dt) {\n\n        this.seek = this.caculated(this.enemy.getPosition());\n        //if (this.seek != this.old_Pos && this.player.getComponent(PlayerController).one_Shot== true)\n            this.bullet.getComponent(cc.RigidBody).linearVelocity = new cc.Vec2(this.seek.x, this.seek.y);\n    }\n}\n"]}